## Цель проекта: *создать виджет для личного кабинета клиента банка, который показывает несколько последних успешных банковских операций клиента.*

## Установка:
### Poetry

Установка Poetry выполняется вводом команды в командной строке:
* на Unix-системах
```
curl -sSL https://install.python-poetry.org | python3 -
```
* на Windows:
```
(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | py -
```
Далее, в зависимости от вашей системы, необходимо добавить соответствующую директорию в PATH:
```
Linux, MacOS, WSL
$HOME/.local/bin
```
```
Windows
%APPDATA%\Python\Scripts
```

Перезагружаем оболочку и проверяем корректность установки:
poetry --version
 
Вывод должен быть примерно таким
```
Poetry (version 1.4.2)
```
### Пакеты: flake8, black, mypy, isort
Установка выполняется командой в терминале IDE:
```
poetry add –group lint flake8 black mypy isort
```
### Python
Переходим на официальный сайт https://www.python.org/downloads/ и жмем download (скачать). Сайт автоматически определит разрядность вашей операционной системы и предложит сохранить 32-bit, либо 64-bit версию. Устанавливаем выбранную версию ПО.
#### **При установке**
* в появившемся окне вы можете выбрать Install Now — в таком случае Python будет установлен в место по умолчанию
* отметить галочкой Add python.exe to PATH

### PyCharm
* •	Переходим на официальный сайт: https://www.jetbrains.com/ru-ru/pycharm/
* •	Выбираем для какой ОС. Жмем скачать.
* •	Далее выбираем бесплатную community версию 
* •	Запускаем загруженный файл


## В модуле masks реализованы следующие функции:

* Функция **get_mask_card_number**  - функция маскировки номера банковской карты,
принимает на вход номер карты и возвращает ее маску. Номер карты замаскирован и
отображается в формате XXXX XX** **** XXXX, где X — это цифра номера.
То есть видны первые 6 цифр и последние 4 цифры, остальные символы отображаются звездочками,
номер разбит по блокам по 4 цифры, разделенным пробелами.
```
Пример работы функции:
7000792289606361     #входной аргумент
7000 79** **** 6361  #выход функции
```

* Функция **get_mask_account** - функция маскировки номера банковского счета,
принимает на вход номер счета и возвращает его маску. Номер счета замаскирован и отображается в формате **XXX, где X— это цифра номера. То есть видны только последние 4 цифры номера, а перед ними — две звездочки.
```
Пример работы функции:
73654108430135874305  #входной аргумент
**4305  #выход функции
```

## В модуле widget реализованы следующие функции:
* Функция **mask_account_card** - принимает один аргумент — строку, содержащую тип и номер карты или счета,
возвращает строку с замаскированным номером
```
Пример работы функции:
Visa Platinum 7000792289606361  # входной аргумент
Visa Platinum 7000 79** **** 6361  # выход функции
```

*	Функция **get_date**  - принимает на вход строку с датой в формате  "2024-03-11T02:26:18.671407"
и возвращает строку с датой в формате "ДД.ММ.ГГГГ" ("11.03.2024").
```
Пример работы функции:
Счет 73654108430135874305  #входной аргумент
Счет **4305  #выход функции
```

## В модуле processing реализованы следующие функции:
*	Функция **filter_by_state** - принимает список словарей и опционально значение для ключа 
state (по умолчанию 'EXECUTED'). Функция возвращает новый список словарей, содержащий только те словари, у которых ключ state соответствует указанному значению.
```
Пример работы функции:
#Входной аргумент
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}] 

#Выход функции со статусом по умолчанию 'EXECUTED'
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]

#Выход функции, если вторым аргументов передано 'CANCELED'
[{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]
```
*	Функция **sort_by_date** - принимает список словарей и необязательный параметр, задающий порядок сортировки (по умолчанию — убывание). Функция должна возвращать новый список, отсортированный по дате (date).
```
Пример работы функции:
#Входной аргумент
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}] 

#Выход функции (сортировка по убыванию, т. е. сначала самые последние операции)
[{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'},
{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]
```
### Тестирование
Используйте библиотеку pytest
```
poetry add --gpoup dev pytest
```
Для анализа покрытия кода надо поставить библиотеку 
pytest-cov
```
poetry add --group dev pytest-cov
```
Применённые тест-кейсы:
##### Модуль masks
###### Функция *get_mask_card_number*
* Тестирование правильности маскирования номера карты.
* Проверка работы функции на различных входных форматах номеров карт, включая граничные случаи и нестандартные длины номеров.
* Проверка, что функция корректно обрабатывает входные строки, где отсутствует номер карты.
###### Функция *get_mask_account*
* Тестирование правильности маскирования номера счета.
* Проверка работы функции с различными форматами и длинами номеров счетов.
* Проверка, что функция корректно обрабатывает входные данные, где номер счета меньше ожидаемой длины.
#### Модуль widget
###### Функция *mask_account_card*
* Тесты для проверки, что функция корректно распознает и применяет нужный тип маскировки в зависимости от типа входных данных (карта или счет).
* Параметризованные тесты с разными типами карт и счетов для проверки универсальности функции.
* Тестирование функции на обработку некорректных входных данных и проверка ее устойчивости к ошибкам.
###### Функция *get_date*
* Тестирование правильности преобразования даты.
* Проверка работы функции на различных входных форматах даты, включая граничные случаи и нестандартные строки с датами.
* Проверка, что функция корректно обрабатывает входные строки, где отсутствует дата.
##### Модуль processing
###### Функция *filter_by_state*
* Тестирование фильтрации списка словарей по заданному статусу state.
* Проверка работы функции при отсутствии словарей с указанным статусом state в списке.
* Параметризация тестов для различных возможных значений статуса state.
###### Функция *sort_by_date*
* Тестирование сортировки списка словарей по датам в порядке убывания и возрастания.
* Проверка корректности сортировки при одинаковых датах.
* Тесты на работу функции с некорректными или нестандартными форматами дат.
##### Общие аспекты тестирования
* *Фикстуры*: для всех тестов создайте фикстуры, которые предоставят тестовые данные для списков словарей, включая различные случаи и комбинации state и date.
* *Покрытие тестами*: убедитесь, что все ветви кода и исключения, которые могут быть сгенерированы вашими функциями, тестируются.